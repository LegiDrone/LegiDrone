{% extends "PolytechProjetCoBundle::layoutAdmin.html.twig" %}

{% block title %}
  Produits - {{ parent() }}
{% endblock %}

{% block body %}

{% for flashMessage in app.session.flashbag.get('success') %}
    <div class="alert alert-success">
        {{ flashMessage }}
    </div>
{% endfor %}
{% for flashMessage in app.session.flashbag.get('error') %}
    <div class="alert alert-errors">
        {{ flashMessage }}
    </div>
{% endfor %}

  <h2>Editer un produit</h2>
<div class="box">
    <div class="box-body">
        <div class="col-md-6">
            <img src="{{ asset(entity.getMediaId.AssetPath) }}" alt="{{ entity.getMediaId.name }}" class="img-Products-Details">
        </div>
        <div class="col-md-6">
            <form action="{{ path('admin_produits_update', { 'id' : entity.id }) }}" method="POST" {{ form_enctype(edit_form) }}>
                {{ form_errors(edit_form) }}


                <table class="table table-responsive">
                    <tbody>
                        <tr>
                            <th>{{ form_label(edit_form.nom, "Nom", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}</th>
                            <td>{{ form_errors(edit_form.nom) }}{{ form_widget(edit_form.nom, {'attr': {'class': 'form-control'}}) }}</td>
                        </tr>
                        <tr>
                            <th>{{ form_label(edit_form.description, "Description", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}</th>
                            <td>{{ form_errors(edit_form.description) }}{{ form_widget(edit_form.description, {'attr': {'class': 'form-control'}}) }}</td>
                        </tr>
                        <tr>
                            <th>{{ form_label(edit_form.prix, "Prix", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}</th>
                            <td>{{ form_errors(edit_form.prix) }}{{ form_widget(edit_form.prix, {'attr': {'class': 'form-control'}}) }}</td>
                        </tr>
                        <tr>
                            <th>{{ form_label(edit_form.disponible, "Disponible", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}</th>
                            <td>{{ form_errors(edit_form.disponible) }}{{ form_widget(edit_form.disponible, {'attr': {'class': 'form-control'}}) }}</td>
                        </tr>
                        <tr>
                            <th>{{ form_label(edit_form.media_id.file, "Choix du fichier", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}</th>
                            <td>{{ form_errors(edit_form.media_id.file) }}{{ form_widget(edit_form.media_id.file) }}</td>
                        </tr><tr>
                            <th>{{ form_label(edit_form.media_id.name, "Nom du fichier", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}</th>
                            <td>{{ form_errors(edit_form.media_id.name) }}{{ form_widget(edit_form.media_id.name, {'attr': {'class': 'form-control'}}) }}</td>
                        </tr>
                        <tr>
                            <th>{{ form_label(edit_form.tva_id, "TVA", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}</th>
                            <td>{{ form_errors(edit_form.tva_id) }}{{ form_widget(edit_form.tva_id, {'attr': {'class': 'form-control'}}) }}</td>
                        </tr>
                        <tr>
                            <th>{{ form_label(edit_form.categories_id, "Catégories", {'label_attr': {'class': 'col-sm-3 control-label'}}) }}</th>
                            <td>{{ form_errors(edit_form.categories_id) }}{{ form_widget(edit_form.categories_id, {'attr': {'class': 'form-control'}}) }}</td>
                        </tr>
                    </tbody>
                </table>


                {# Pour le bouton, pas de label ni d'erreur, on affiche juste le widget #}
                <div class="pull-right">
                {{ form_widget(edit_form.submit, {'attr': {'class': 'btn btn-primary'}, 'label': 'Mettre à jour'}) }}
                </div>
                {{ form_rest(edit_form) }}

                </form>
        </div>
    </div>
    <div class="box-footer">
        <div class="col-xs-6">
            <div class="pull-center">
                <a href="{{ path('admin_produits') }}" class="btn btn-primary">
                    Retour à la liste
                </a>
            </div>

        </div>
        <div class="col-xs-6">
            {{form_start(delete_form)}}
            {{ form_widget(delete_form.submit, {'attr': {'class': 'btn btn-primary'}, 'label': 'Supprimer'}) }}
            {{form_end(delete_form)}}
        </div>
    </div>
</div>
{% endblock %}
