<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>{% block title %}Projet Collectif{% endblock %}</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
    {% block stylesheets %}
      <!--MAP-->
      <link href="{{ asset('Style/map/france_departement_jqvmap/jqvmap.css') }}" media="screen" rel="stylesheet" type="text/css" />
      
      <!--Style Perso-->
      <link href="{{ asset('Style/Perso/StylePerso.css') }}" rel="stylesheet" type="text/css" />
      
    <!-- Bootstrap 3.3.4 -->
      <link href="{{ asset('Style/bootstrap/css/bootstrap.min.css') }}" type="text/css" rel="stylesheet" />
   
    <!-- FontAwesome 4.3.0 -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <!-- Ionicons 2.0.0 -->
    <link href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet" type="text/css" />    
    <!-- Theme style -->
      <link href="{{ asset('Style/dist/css/AdminLTE_fixed.css') }}" type="text/css" rel="stylesheet" />

    <!-- AdminLTE Skins. Choose a skin from the css/skins 
         folder instead of downloading all of them to reduce the load. -->
      <link href="{{ asset('Style/dist/css/skins/_all-skins.min.css') }}" type="text/css" rel="stylesheet" />
    <!-- iCheck -->
      <link href="{{ asset('Style/plugins/iCheck/flat/blue.css') }}" type="text/css" rel="stylesheet" />
    <!-- Morris chart -->
      <link href="{{ asset('Style/plugins/morris/morris.css') }}" type="text/css" rel="stylesheet" />

      
    <!-- jvectormap -->
      <link href="{{ asset('Style/plugins/jvectormap/jquery-jvectormap-1.2.2.css') }}" type="text/css" rel="stylesheet" />
    <!-- Date Picker -->
      <link href="{{ asset('Style/plugins/datepicker/datepicker3.css') }}" type="text/css" rel="stylesheet" />
    <!-- Daterange picker -->
      <link href="{{ asset('Style/plugins/daterangepicker/daterangepicker-bs3.css') }}" type="text/css" rel="stylesheet" />
    <!-- bootstrap wysihtml5 - text editor -->
      <link href="{{ asset('Style/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css') }}" type="text/css" rel="stylesheet" />
    {% endblock %}
      
  </head>
    
    <body class="skin-blue layout-top-nav">
    <div class="wrapper">

      <header class="main-header">               
        <nav class="navbar navbar-static-top">
          <div class="container">
              
            <div class="navbar-header">
                <div class="pull-left">
                    <a href="{{ path('polytech_projet_co_home') }}">
                        <img src="{{ asset('images/Logo/legidrone.png') }}" height="48px" width="48px" alt="Logo" />
                    </a>
                </div>
                <a href="{{ path('polytech_projet_co_home') }}" class="navbar-brand">
                  <b>Legi</b>Drone
                </a>
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse">
                <i class="fa fa-bars"></i>
              </button>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse pull-left" id="navbar-collapse">
              <ul class="nav navbar-nav">
                  {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                    {% if is_granted("ROLE_ADMIN") %}
                        <li class="active"><a href="{{ path('polytech_projet_co_dashboardAdmin') }}">Tableau de bord<span class="sr-only"></span></a></li>
                    {% else %}
                        <li class="active"><a href="{{ path('polytech_projet_co_dashboard') }}">Tableau de bord<span class="sr-only"></span></a></li>
                    {% endif %}
                    
                    <li class="active"><a href="{{ path('polytech_ecommerce_Produits') }}">Produits<span class="sr-only"></span></a></li>
                  {% else %}
                    <li class="active"><a href="{{ path('polytech_projet_co_contact') }}">Contact <span class="sr-only"></span></a></li>
                  {% endif %}
                  
                  
              </ul>                        
            </div><!-- /.navbar-collapse -->
            <!-- Navbar Right Menu -->
              <div class="navbar-custom-menu">
                <ul class="nav navbar-nav">
                    

                  <!-- User Account Menu -->
                  
                      {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                        {% include "PolytechUserBundle::UserDropDown.html.twig" %}
                      {% else %}
                        {% include "PolytechUserBundle::Connexion.html.twig" %}
                      {% endif %}
                  
                </ul>
              </div><!-- /.navbar-custom-menu -->
          </div><!-- /.container-fluid -->
        </nav>
      </header>
      <!-- Full Width Column -->
      <div class="content-wrapper">
        <div class="container">
          <!-- Content Header (Page header) -->


          <!-- Main content -->
          {% block body %}
        
          {% endblock %}
        </div><!-- /.container -->
      </div><!-- /.content-wrapper -->
      <!--footer class="main-footer">
        <div class="container">
          <div class="pull-right hidden-xs">
            <b>Version</b> 2.0
          </div>
          <strong>Copyright &copy; 2014-2015 <a href="http://almsaeedstudio.com">Almsaeed Studio</a>.</strong> All rights reserved.
        </div><!-- /.container -->
      <!--/footer-->
    </div><!-- ./wrapper -->

     {% block javascripts %}
        
    <!-- jQuery 2.1.4 -->    
    <script type="text/javascript" src="{{ asset('Style/plugins/jQuery/jQuery-2.1.4.min.js') }}"></script>
        
    <!-- jQuery UI 1.11.2 -->
    <script src="http://code.jquery.com/ui/1.11.2/jquery-ui.min.js" type="text/javascript"></script>

    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <script>
      $.widget.bridge('uibutton', $.ui.button);
    </script>
        
    <!-- Bootstrap 3.3.2 JS -->
    <script type="text/javascript" src="{{ asset('Style/bootstrap/js/bootstrap.min.js') }}"></script>

    <!-- Morris.js charts -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
    <script src="{{ asset('Style/plugins/morris/morris.min.js') }}" type="text/javascript"></script>
    
    <!-- Sparkline -->
    <script src="{{ asset('Style/plugins/sparkline/jquery.sparkline.min.js') }}" type="text/javascript"></script>    
    <!-- jvectormap -->
    <script src="{{ asset('Style/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Style/plugins/jvectormap/jquery-jvectormap-world-mill-en.js') }}" type="text/javascript"></script>
    <!-- jQuery Knob Chart -->
    <script src="{{ asset('Style/plugins/knob/jquery.knob.js') }}" type="text/javascript"></script>
    
    <!-- daterangepicker -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Style/plugins/daterangepicker/daterangepicker.js') }}" type="text/javascript"></script>
    <!-- datepicker -->
    <script src="{{ asset('Style/plugins/datepicker/bootstrap-datepicker.js') }}" type="text/javascript"></script>
    <!-- Bootstrap WYSIHTML5 -->
    <script src="{{ asset('Style/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js') }}" type="text/javascript"></script>
        
    <!-- SlimScroll -->
    <script type="text/javascript" src="{{ asset('Style/plugins/slimScroll/jquery.slimscroll.min.js') }}"></script>

    <!-- FastClick -->
    <script type="text/javascript" src="{{ asset('Style/plugins/fastclick/fastclick.min.js') }}"></script>

    <!-- AdminLTE App -->
    <script type="text/javascript" src="{{ asset('Style/dist/js/app.min.js') }}"></script>
    
    <!-- AdminLTE for demo purposes -->
    <script type="text/javascript" src="{{ asset('Style/dist/js/demo.js') }}"></script>
        
    <!--Map-->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="{{ asset('Style/map/france_departement_jqvmap/jquery.vmap.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Style/map/france_departement_jqvmap/jquery.vmap.france.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Style/map/france_departement_jqvmap/jquery.vmap.colorsFrance.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
    <script src="{{ path('fos_js_routing_js', {'callback': 'fos.Router.setData'}) }}"></script>
	<script type="text/javascript">
	$(document).ready(function() {
		$('#francemap').vectorMap({
		    map: 'france_fr',
			hoverOpacity: 0.5,
			hoverColor: false,
			backgroundColor: "#ffffff",
			colors: couleurs,
			borderColor: "#000000",
			enableZoom: true,
			showTooltip: true,
            onRegionClick: function(element, code, region)
		    {
                $.ajax({
                    type : 'get',
                    url : 'http://localhost/ProjetCoLast/LegiDrone/web/app_dev.php/departements',
                    //url : Routing.generate('departements'),
                    success: function(data){ 
                        if(parseInt(code) in data)//presence du département
                        {
                            var targetElement;
                            targetElement =  document.getElementById("Test") ;
                            if (targetElement.style.display == "none")
                            {
                                targetElement.style.display = "" ;
                            }
                            //affichage du text
                            targetElement.innerHTML =
                                "<table class=&rdquo;table table-responsive&rdquo;><tbody><tr><th>Titre </th> <td>" + data[parseInt(code)][0] + "</td></tr>"+
                                "<tr><th>valide jusqu'au</th> <td>" + data[parseInt(code)][3]["date"].split(" ")[0].split("-")[2] + "/"+data[parseInt(code)][3]["date"].split(" ")[0].split("-")[1]+ "/"+ data[parseInt(code)][3]["date"].split(" ")[0].split("-")[0] +"</td></tr>"+
                                "<tr><td><a href={{path('polytech_preview_fichiers',{ 'id' : 7 })}} target= &rdquo;_blank&rdquo;>afficher</a> </td></tr></tbody></table>";
                        }
                        else
                        { 
                            var targetElement;
                            targetElement =  document.getElementById("Test") ;
                            if (targetElement.style.display == "")
                            {
                                targetElement.style.display = "none" ;
                            }
                        }
                    }
                });
            }
		});
       $.ajax({
            type : 'get',
           url : 'http://localhost/ProjetCoLast/LegiDrone/web/app_dev.php/departements',
           //url : Routing.generate('departements'),
            success: function(data){ 
                $.each(data, function(index, value){         
                    var country_colors = {};
                    if(index < 10) index = "0"+ index;
                    if(value[4] == 0)country_colors[index] = '#FFFFFF'; //rien
                    if(value[4] == 1)country_colors[index] = '#16B84E';//valide
                    if(value[4] == 2)country_colors[index] = '#FCD21C'; //bientot
                    if(value[4] == 3)country_colors[index] = '#ED0000'; //expiré
                    if(value[4] == 4)country_colors[index] = '#77B5FE'; //traitement 
                    
                    jQuery('#francemap').vectorMap('set', 'colors', country_colors);
                });
            }
            });
	});
	</script> 
        
        
    {% endblock %}
  </body>

    
</html>