<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>{% block title %}Projet Collectif{% endblock %}</title>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>
      {% block stylesheets %}
      
      <!--MAP-->
      <link href="{{ asset('Style/map/france_departement_jqvmap/jqvmap.css') }}" media="screen" rel="stylesheet" type="text/css" />
      
      <!--Style Perso-->
      <link href="{{ asset('Style/Perso/StylePerso.css') }}" rel="stylesheet" type="text/css" />
      
    <!-- Bootstrap 3.3.4 -->
    <link href="{{ asset('Style/bootstrap/css/bootstrap.min.css')}}" rel="stylesheet" type="text/css" /> 
      
    <!-- FontAwesome 4.3.0 -->
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
      
    <!-- Ionicons 2.0.0 -->
    <link href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" rel="stylesheet" type="text/css" />  
      
    <!-- Theme style -->
    <link href="{{ asset('Style/dist/css/AdminLTE.css') }}" rel="stylesheet" type="text/css" />
      
    <!-- AdminLTE Skins. Choose a skin from the css/skins 
         folder instead of downloading all of them to reduce the load. -->
    <link href="{{ asset('Style/dist/css/skins/skin-blue.min.css') }}" rel="stylesheet" type="text/css" />
      
    <!-- iCheck -->
    <link href="{{ asset('Style/plugins/iCheck/flat/blue.css') }}" rel="stylesheet" type="text/css" />
      
    <!-- Morris chart -->
    <link href="{{ asset('Style/plugins/morris/morris.css') }}" rel="stylesheet" type="text/css" />
      
    <!-- jvectormap -->
    <link href="{{ asset('Style/plugins/jvectormap/jquery-jvectormap-1.2.2.css') }}" rel="stylesheet" type="text/css" />
      
    <!-- Date Picker -->
    <link href="{{ asset('Style/plugins/datepicker/datepicker3.css') }}" rel="stylesheet" type="text/css" />
      
    <!-- Daterange picker -->
    <link href="{{ asset('Style/plugins/daterangepicker/daterangepicker-bs3.css') }}" rel="stylesheet" type="text/css" />
      
    <!-- bootstrap wysihtml5 - text editor -->
    <link href="{{ asset('Style/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css') }}" rel="stylesheet" type="text/css" />
{% endblock %}

  </head>
  <body class="skin-blue sidebar-mini">
    <div class="wrapper">
      
      <header class="main-header">
        <!-- Logo -->
        <a href="{{ path('polytech_projet_co_home') }}" class="logo">
            <div class="pull-left">
                <img src="{{ asset('images/Logo/legidrone.png') }}" height="48px" width="48px" alt="Logo" />
            </div>
          <!-- mini logo for sidebar mini 50x50 pixels -->
          <span class="logo-mini"><b>L</b>Drone</span>
          <!-- logo for regular state and mobile devices -->
          <span class="logo-lg"><b>Legi</b>Drone</span>
        </a>
        <!-- Header Navbar: style can be found in header.less -->
        <nav class="navbar navbar-static-top" role="navigation">
          <!-- Sidebar toggle button-->
          <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
            <span class="sr-only">Toggle navigation</span>
          </a>
          <div class="navbar-custom-menu">
            <ul class="nav navbar-nav">
                <!-- User Account Menu -->
                  <li class="dropdown user user-menu">
                  {% if is_granted("IS_AUTHENTICATED_REMEMBERED") %}
                    {% include "PolytechUserBundle::UserDropDown.html.twig" %}
                  {% else %}
                    {% include "PolytechUserBundle::Connexion.html.twig" %}
                  {% endif %}
                </li>
            </ul>
          </div>
        </nav>
      </header>
      <!-- Left side column. contains the logo and sidebar -->
      <aside class="main-sidebar">
        <!-- sidebar: style can be found in sidebar.less -->
        <section class="sidebar">
          {% include "PolytechProjetCoBundle:Layout:LeftMenu.html.twig" %}
        </section>
        <!-- /.sidebar -->
      </aside>

      <!-- Content Wrapper. Contains page content -->
        <!-- Full Width Column -->
      <div class="content-wrapper">
        <div class="content">
          <!-- Content Header (Page header) -->


          <!-- Main content -->
          {% block body %}
        
          {% endblock %}
        </div><!-- /.container -->
      </div><!-- /.content-wrapper -->
        
      <footer class="main-footer">
        <div class="pull-right hidden-xs">
          <b>Version</b> 2.0
        </div>
        <strong>Copyright &copy; 2014-2015 <a href="http://almsaeedstudio.com">Almsaeed Studio</a>.</strong> All rights reserved.
      </footer>
      </div>
      
      
{% block javascripts %}
    <!-- jQuery 2.1.4 -->    
    <script type="text/javascript" src="{{ asset('Style/plugins/jQuery/jQuery-2.1.4.min.js') }}"></script>
        
    <!-- jQuery UI 1.11.2 -->
    <script src="http://code.jquery.com/ui/1.11.2/jquery-ui.min.js" type="text/javascript"></script>

    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <script>
      $.widget.bridge('uibutton', $.ui.button);
    </script>
        
    <!-- Bootstrap 3.3.2 JS -->
    <script type="text/javascript" src="{{ asset('Style/bootstrap/js/bootstrap.min.js') }}"></script>

    <!-- Morris.js charts -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
    <script src="{{ asset('Style/plugins/morris/morris.min.js') }}" type="text/javascript"></script>
    
    <!-- Sparkline -->
    <script src="{{ asset('Style/plugins/sparkline/jquery.sparkline.min.js') }}" type="text/javascript"></script>    
    <!-- jvectormap -->
    <script src="{{ asset('Style/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Style/plugins/jvectormap/jquery-jvectormap-world-mill-en.js') }}" type="text/javascript"></script>
    <!-- jQuery Knob Chart -->
    <script src="{{ asset('Style/plugins/knob/jquery.knob.js') }}" type="text/javascript"></script>
    
    <!-- daterangepicker -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Style/plugins/daterangepicker/daterangepicker.js') }}" type="text/javascript"></script>
    <!-- datepicker -->
    <script src="{{ asset('Style/plugins/datepicker/bootstrap-datepicker.js') }}" type="text/javascript"></script>
    <!-- Bootstrap WYSIHTML5 -->
    <script src="{{ asset('Style/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js') }}" type="text/javascript"></script>
        
    <!-- SlimScroll -->
    <script type="text/javascript" src="{{ asset('Style/plugins/slimScroll/jquery.slimscroll.min.js') }}"></script>

    <!-- FastClick -->
    <script type="text/javascript" src="{{ asset('Style/plugins/fastclick/fastclick.min.js') }}"></script>

    <!-- AdminLTE App -->
    <script type="text/javascript" src="{{ asset('Style/dist/js/app.min.js') }}"></script>
    
    <!-- AdminLTE for demo purposes -->
    <script type="text/javascript" src="{{ asset('Style/dist/js/demo.js') }}"></script>
      
      <!-- Drag and drop -->
      <script type="text/javascript" src="{{ asset('Style/Perso/JS/dropzone.js') }}"></script>
      
     <!--Map-->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
    <script src="{{ asset('Style/map/france_departement_jqvmap/jquery.vmap.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Style/map/france_departement_jqvmap/jquery.vmap.france.js') }}" type="text/javascript"></script>
    <script src="{{ asset('Style/map/france_departement_jqvmap/jquery.vmap.colorsFrance.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/fosjsrouting/js/router.js') }}"></script>
    <script src="{{ path('fos_js_routing_js', {'callback': 'fos.Router.setData'}) }}"></script>
	<script type="text/javascript">
	$(document).ready(function() {
		$('#francemap').vectorMap({
		    map: 'france_fr',
			hoverOpacity: 0.5,
			hoverColor: false,
			backgroundColor: "#ffffff",
			colors: couleurs,
			borderColor: "#000000",
			enableZoom: true,
			showTooltip: true,
            onRegionClick: function(element, code, region)
		    {
                $.ajax({
                    type : 'get',
                    url : 'http://localhost/ProjetCoLast/LegiDrone/web/app_dev.php/departements',
                    //url : Routing.generate('departements'),
                    success: function(data){ 
                        if(parseInt(code) in data)//presence du d√©partement
                        {
                            var targetElement;
                            targetElement =  document.getElementById("Test") ;
                            if (targetElement.style.display == "none")
                            {
                                targetElement.style.display = "" ;
                            }
                            //affichage du text
                            targetElement.innerHTML =
                                "<table class=&rdquo;table table-responsive&rdquo;><tbody><tr><th>Titre </th> <td>" + data[parseInt(code)][0] + "</td></tr>"+
                                "<tr><th>valide jusqu'au</th> <td>" + data[parseInt(code)][3]["date"].split(" ")[0].split("-")[2] + "/"+data[parseInt(code)][3]["date"].split(" ")[0].split("-")[1]+ "/"+ data[parseInt(code)][3]["date"].split(" ")[0].split("-")[0] +"</td></tr>"+
                                "<tr><td><a href={{path('polytech_preview_fichiers',{ 'id' : 15 })}} target= &rdquo;_blank&rdquo;>afficher</a> </td></tr></tbody></table>";
                        }
                        else
                        { 
                            var targetElement;
                            targetElement =  document.getElementById("Test") ;
                            if (targetElement.style.display == "")
                            {
                                targetElement.style.display = "none" ;
                            }
                        }
                    }
                });
            }
		});
       $.ajax({
            type : 'get',
           url : 'http://localhost/ProjetCoLast/LegiDrone/web/app_dev.php/departements',
           //url : Routing.generate('departements'),
            success: function(data){ 
                $.each(data, function(index, value){         
                    var country_colors = {};
                    if(index < 10) index = "0"+ index;
                    if(value[4] == 0)country_colors[index] = '#FFFFFF'; //rien
                    if(value[4] == 1)country_colors[index] = '#16B84E';//valide
                    if(value[4] == 2)country_colors[index] = '#FCD21C'; //bientot
                    if(value[4] == 3)country_colors[index] = '#ED0000'; //expir√©
                    if(value[4] == 4)country_colors[index] = '#77B5FE'; //traitement 
                    
                    jQuery('#francemap').vectorMap('set', 'colors', country_colors);
                });
            }
            });
	});
	</script> 
      
{% endblock %} 
  </body>
</html>